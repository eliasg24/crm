{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operativo Anfitrion - Prospectos Madiautos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="{% static 'css/operativo_anfitrion.css' %}" rel="stylesheet"/>

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="/bundles/bootstrap?v=QtxRrbVxHAK-b5ZowWqv6Wt7oUOJAggG80vl1X-EGBM1"></script>

    <script src="/bundles/timepicker?v=SNA17wI1rMl4CP8ayG1ydmEu0eLQfZiFCqPl0hXZpd01"></script>

    <script src="/bundles/sweet?v=ZMOC4FpxSbszBSzdHGvkc9O_scCReJoQ_PgxKeHWirk1"></script>

    <script src="https://use.fontawesome.com/877bbc2081.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">

    <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"></script>

    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.2/dist/extensions/defer-url/bootstrap-table-defer-url.min.js"></script>

    

</head>
<body style="overflow-x: hidden;">
    {% include 'nav.html' %}
    
    <div class="body-content">
        

<form action="/Leads/WriteDataToExcelOpAnfitrion" method="post"><input name="__RequestVerificationToken" type="hidden" value="08q8arMvD1gsPusg-gKWBO74UTRfBFwqHN59gFJm8SUKe2HlVqMMttCXRuNt651Pxul-cghss_9gLUe5qDx34kxhku4roN_APmikiaqNlNQ1" />    <!--container principal-->
    <div class="main-panel">
        <div class="main-content">
            <div class="content-wrapper">
                <div class="container-fluid">
                    <form>
                        <h4 style="margin:20px;">Ventas - Operativo Anfitrión</h4>
                        <div style="box-shadow:none;">
                            <div class="card-header border-0" style="background-color: #eee;">
                                <!--<p class="card-category">Recientes</p>-->
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="card-counter morado">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        {{cantidad_primer_contacto}}
                                                    </span>
                                                    <a href="#tibias" style="color: #ffffff;"><span class="count-name">Primer Contacto</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card-counter morado">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        {{cantidad_verificados}}
                                                    </span>
                                                    <a href="#calientes" style="color: #ffffff;"><span class="count-name">Verificacion</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card-counter morado">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        {{cantidad_agendados}}
                                                    </span>
                                                    <a href="#historial" style="color: #ffffff;"><span class="count-name">Historial de Captura</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body border-0" style="background-color: #eee;">
                                <div class="widget-list" id="tibias">
                                    <div id="toolbar1">
                                        <div class="form-inline" role="form">
                                            <div class="form-group">
                                                <span>De: </span>
                                                <input name="PCDesde" id="PCDesde" class="form-control w70 rangos" type="text" autocomplete="off">
                                            </div>
                                            <div class="form-group">
                                                <span>a: </span>
                                                <input name="PCHasta" id="PCHasta" class="form-control w70 rangos" type="text" autocomplete="off">
                                            </div>
                                            <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarPC();">Buscar</button>
                                            <button id="rPC" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                        </div>
                                    </div>
                                        <table id="tablePrimerContacto"
                                               data-toolbar="#toolbar1"
                                               {% if user.groups.get|stringformat:"s" !=  "Anfitrión" %}
                                               data-show-export="true"
                                               {% endif %}
                                               data-toggle="table"
                                               data-height="800"
                                               data-pagination="true"
                                               data-search="true"
                                               data-sort-class="table-active"
                                               data-show-columns="true"
                                               data-show-columns-search="true"
                                               data-filter-control="true"
                                               data-export-data-type="all"
                                               data-query-params="queryParams">
                                            <thead class="table100-head table100 ver3 morado">
                                                <tr>
                                                    <th data-field="Detalle"> Detalle </th>
                                                    <th data-field="FechaIngreso">
                                                        Fecha de Ingreso
                                                    </th>
                                                    <th data-field="Cliente">
                                                        Cliente
                                                    </th>
                                                    <th data-field="Telefono">
                                                        Telefono
                                                    </th>
                                                    <th data-field="OrigenIngreso">
                                                        Origen de Ingreso
                                                    </th>
                                                    <th data-field="Anfitrion">
                                                        Anfitrión Asignado
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;">
                                                {% for lead in leads_primer_contacto %}
                                                <tr>
                                                    <td><a href="{% url 'dashboards:captura_reasignamiento' lead.pk %}">Detalle</td>
                                                    <td>{{lead.fecha_apertura.date|date:'Y-m-d'}}</td>
                                                    <td>{{lead.prospecto.nombre}} {{lead.prospecto.apellido_paterno}} {{lead.prospecto.apellido_materno}}</td>
                                                    <td>{{lead.prospecto.celular}}</td>
                                                    <td>{{lead.origen_lead}}</td>
                                                    <td>{{lead.nombre_anfitrion}}</td>
                                                </tr>
                                                {% endfor %}
                                            
                                            </tbody>
                                            
                                        </table>
                                </div>

                                <div class="widget-list" id="calientes">
                                    <div id="toolbar2">
                                        <div class="form-inline" role="form">
                                            <div class="form-group">
                                                <span>De: </span>
                                                <input name="VDesde" id="VDesde" class="form-control w70 rangos" type="text" autocomplete="off">
                                            </div>
                                            <div class="form-group">
                                                <span>a: </span>
                                                <input name="VHasta" id="VHasta" class="form-control w70 rangos" type="text" autocomplete="off">
                                            </div>
                                            <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarV();">Buscar</button>
                                            <button id="rV" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                        </div>
                                    </div>
                                        <table id="tableVerificacion"
                                               data-toolbar="#toolbar2"
                                               {% if user.groups.get|stringformat:"s" !=  "Anfitrión" %}
                                               data-show-export="true"
                                               {% endif %}
                                               data-toggle="table"
                                               data-height="800"
                                               data-pagination="true"
                                               data-search="true"
                                               data-sort-class="table-active"
                                               data-sortable="true"
                                               data-show-columns="true"
                                               data-show-columns-search="true"
                                               data-filter-control="true"
                                               data-export-data-type="all"
                                               data-query-params="exportVerificados"
                                               >
                                            <thead class="table100-head table100 ver3 morado">
                                                <tr>
                                                    <th data-field="FechaIngreso" data-sortable="true">
                                                        Fecha de Verificación
                                                    </th>
                                                    <th data-field="Hora" data-sortable="true">Hora</th>
                                                    <th data-field="Cliente" data-sortable="true">
                                                        Cliente
                                                    </th>
                                                    <th data-field="Responsable" data-sortable="true">
                                                        Responsable
                                                    </th>
                                                    <th data-field="Telefono" data-sortable="true">Telefono</th>
                                                    <th data-field="OrigenIngreso" data-sortable="true">
                                                        Origen de Ingreso
                                                    </th>
                                                    <th data-field="EstadoLlamada" data-sortable="true">
                                                        Estado de Llamada
                                                    </th>
                                                    <th data-field="Anfitrion" data-sortable="true">
                                                        Anfitrión
                                                    </th>
                                                    <th data-field="TipoSolicitud" data-sortable="true">
                                                        Tipo de Solicitud
                                                    </th>
                                                    <th data-field="Sala" data-sortable="true">
                                                        Sala
                                                    </th>
                                                    <th data-field="AsesorOriginal" data-sortable="true">
                                                        Asesor Original
                                                    </th>
                                                    <th data-field="Reasignado" data-sortable="true">
                                                        Reasignado a
                                                    </th>
                                                    <th data-field="Comentario" data-visible="false">
                                                        Comentario
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;">

                                            {% for verificacion in verificaciones %}
                                                <tr>
                                                    <td>{{verificacion.fecha_hora_verificacion.date|date:'Y-m-d'}}</td>
                                                    <td>{{verificacion.fecha_hora_verificacion|time:'H:i'}}</td>
                                                    <td>{{verificacion.lead.prospecto.nombre}} {{verificacion.lead.prospecto.apellido_paterno}} {{verificacion.lead.prospecto.apellido_materno}}</td>
                                                    <td>{{verificacion.responsable}}</td>
                                                    <td>{{verificacion.lead.prospecto.celular}}</td>
                                                    <td>{{verificacion.lead.origen_lead}}</td>
                                                    <td>{{verificacion.estado_llamada}}</td>
                                                    <td>{{verificacion.lead.nombre_anfitrion}}</td>
                                                    <td>{{verificacion.tipo_solicitud}}</td>
                                                    <td>{{verificacion.lead.sala}}</td>
                                                    <td>{{verificacion.lead.prospecto.nombre_asesor}}</td>
                                                    <td>{% if lead.tipo_solicitud_verificacion == "Reasignado" %}{{verificacion.lead.nombre_asesor}}{% else %}N/A{% endif %}</td>
                                                    <td>{{verificacion.lead.comentario}}</td>
                                                </tr>
                                            {% endfor %}
                                            </tbody>
                                            
                                        </table>
                                </div>

                                <div class="widget-list" id="historial">
                                    <div id="toolbar3">
                                        <div class="form-row">
                                            <div class="form-group col-md-4">
                                                <select class="form-control form-control-sm" id="H_Anfitrion" name="H_Anfitrion"><option selected="selected" value="0">-- Anfitrion --</option>
                                                    {% for nombre_anfitrion in anfitriones_agendados %}
                                                    <option value="{{nombre_anfitrion.nombre_anfitrion}}">{{nombre_anfitrion.nombre_anfitrion}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-1">
                                                <select id="H_Verificado" name="H_Verificado" class="form-control form-control-sm">
                                                    <option value="0" selected>--Verificado--</option>
                                                    <option value="SI">SI</option>
                                                    <option value="NO">NO</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="H_TipoSolicitud" name="H_TipoSolicitud"><option selected="selected" value="0">-- Tipo Solicitud --</option>
                                                    {% for tipo_solicitud_verificacion in tipos_solicitud_agendados %}
                                                    <option value="{{tipo_solicitud_verificacion.tipo_solicitud_verificacion}}">{{tipo_solicitud_verificacion.tipo_solicitud_verificacion}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="H_Asesor" name="H_Asesor"><option selected="selected" value="0">-- Asesor --</option>
                                                    {% for nombre_asesor in asesores_agendados %}
                                                    <option value="{{nombre_asesor.nombre_asesor}}">{{nombre_asesor.nombre_asesor}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-1">
                                                <select id="H_Sala" name="H_Sala" class="form-control form-control-sm">
                                                    <option value="0" selected>--Sala--</option>
                                                    {% for sala in salas_agendados %}
                                                    <option value="{{sala.sala}}">{{sala.sala}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">De:</span>
                                                    </div>
                                                    <input name="HDesde" id="HDesde" class="form-control rangos" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">a:</span>
                                                    </div>
                                                    <input name="HHasta" id="HHasta" class="form-control rangos" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarHistorial();">Buscar</button>
                                                <button id="rH" type="button" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search" id="H_Cadena" name="H_Cadena">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button" onclick="FiltrarHistorial();"><i class="tiny material-icons">search</i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <table id="tableHistorial"
                                       data-toolbar="#toolbar3"
                                       data-toggle="table"
                                       data-height="800"
                                       data-pagination="true"
                                       data-side-pagination="server"
                                       data-sort-class="table-active"
                                       data-sortable="true"
                                       data-show-columns="true"
                                       data-show-columns-search="true"
                                       data-filter-control="true">
                                    <thead class="table100-head table100 ver3 morado">
                                        <tr>
                                            <th data-field="Detalle">
                                                Detalle
                                            </th>
                                            <th data-field="FechaIngreso">
                                                Fecha de Ingreso
                                            </th>
                                            <th data-field="OrigenIngreso">
                                                Origen de Ingreso
                                            </th>
                                            <th data-field="Cliente">
                                                Cliente
                                            </th>
                                            <th data-field="Telefono">Telefono</th>
                                            <th data-field="Anfitrion">
                                                Anfitrión
                                            </th>
                                            <th data-field="Sala"> Sala </th>
                                            <th data-field="Asesor"> Asesor </th>
                                            <th data-field="Verificado">Verificado</th>
                                            <th data-field="TipoSolicitud">Tipo de Solicitud</th>
                                            <th data-field="AsesorReasignado">
                                                Asesor Reasignado
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody style="background-color:white;">
                                        {% for lead in leads_agendados %}
                                        <tr>
                                            <td><a href="{% url 'dashboards:detallenuevo' lead.pk %}">Detalle</td>
                                            <td>{{lead.fecha_apertura.date|date:'Y-m-d'}}</td>
                                            <td>{{lead.origen_lead}}</td>
                                            <td>{{lead.prospecto.nombre}} {{lead.prospecto.apellido_paterno}} {{lead.prospecto.apellido_materno}}</td>
                                            <td>{{lead.prospecto.celular}}</td>
                                            <td>{{lead.nombre_anfitrion}}</td>
                                            <td>{{lead.sala}}</td>
                                            <td>{{lead.prospecto.nombre_asesor}}</td>
                                            <td>{% if lead.estado_llamada_verificacion %}SI{% else %}NO{% endif %}</td>
                                            <td>{{lead.tipo_solicitud_verificacion}}</td>
                                            <td>{% if lead.tipo_solicitud_verificacion == "Reasignado" %}{{lead.nombre_asesor}}{% else %}N/A{% endif %}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</form><script>
  
</script>

        <hr />
        <footer>
            <p>&copy; 2023 - Capital Network</p>
        </footer>
    </div>

    
    
    <script src="/bundles/jqueryval?v=hEGG8cMxk9p0ncdRUOJ-CnKN7NezhnPnWIvn6REucZo1"></script>


</body>
</html>
