<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Operativo Taller - Prospectos Madiautos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="{% static 'css/style.css' %}" rel="stylesheet"/>

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="/bundles/bootstrap?v=QtxRrbVxHAK-b5ZowWqv6Wt7oUOJAggG80vl1X-EGBM1"></script>

    <script src="/bundles/timepicker?v=SNA17wI1rMl4CP8ayG1ydmEu0eLQfZiFCqPl0hXZpd01"></script>

    <script src="/bundles/sweet?v=ZMOC4FpxSbszBSzdHGvkc9O_scCReJoQ_PgxKeHWirk1"></script>

    <script src="https://use.fontawesome.com/877bbc2081.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">

    <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"></script>

    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.2/dist/extensions/defer-url/bootstrap-table-defer-url.min.js"></script>

    

</head>
<body style="overflow-x: hidden;">
    <nav class="navbar navbar-expand-lg sticky-top navbar-dark bg-dark">
        <a class="navbar-brand">Operativo Taller</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarSupportedContent" class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Captura prospectos</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/Leads/Captura">Venta</a>
                        <a class="dropdown-item" href="/Compras/CompraCaptura">Compra</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Operativo Anfitrion</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/Leads/OperativoAnfitrion">Venta</a>
                        <a class="dropdown-item" href="/Compras/OperativoAnfitrionCompras">Compra</a>
                        <a class="dropdown-item" href="/SolicitudPeritaje/SeguimientoAnfitrion">Solicitudes de Peritaje</a>
                    </div>
                </li>

                    <li><a class="nav-link" href="/Leads/OperativoAsesor">Operativo Asesor</a></li>

                    <li><a class="nav-link" href="/Compras/OperativoComprador">Operativo Comprador</a></li>
                                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Reportes</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="/Leads/Reports">Venta</a>
                            <a class="dropdown-item" href="/Compras/ReportesCompras">Compra</a>
                            <a class="dropdown-item" href="/SolicitudPeritaje/ReportesSolicitudesPeritaje">Solicitudes Peritaje</a>
                        </div>
                    </li>
                                    <li><a class="nav-link" href="/Compras/OperativoPerito">Operativo Perito</a></li>
                    <li><a class="nav-link" href="/Compras/OperativoTaller">Operativo Taller</a></li>
                                    <li><a class="nav-link" href="http://capnet3.ddns.net:5007/" target="_blank">KPI's</a></li>
            </ul>
            <div class="form-inline">
                <button type="button" style="margin-right: 30px; border: none transparent; background-color:transparent; color:white;" onClick="history.back();"><i class="material-icons">reply</i>Atras</button>
<form action="/Account/CerrarSesion" method="post">                    <button type="submit" value="CerrarSesion" style="border: none transparent; background-color:transparent; color:white;"><i class="material-icons">exit_to_app</i>Salir</button>
</form>            </div>
            
        </div>
    </nav>
    
    <div class="body-content">
        



<form action="/Compras/OperativoTaller" method="post"><input name="__RequestVerificationToken" type="hidden" value="-GtU5stZlGRyTOOjhsl7HU6ts7EdOHPYiuVVl8Oj9JQNWAOMd05r8f3C5g1hoj7kTnXjl7woVWF4M3hMOaE8Cq5YzzTnBdmehTr94AJTCN01" />    <!--container principal-->
    <div class="main-panel">
        <div class="main-content">
            <div class="content-wrapper">
                <div class="container-fluid">
                    <form>
                        <div id="tabs" style="box-shadow:none;">
                            <div class="card-header border-0" style="background-color: #eee;">
                                <!--<p class="card-category">Recientes</p>-->
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="card-counter danger">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        617
                                                    </span>
                                                    <a href="#frias" style="color: #ffffff;"><span class="count-name">Peritajes Realizados</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body border-0" style="background-color: #eee;">
                                <div class="widget-list" id="frias">
                                    <div id="toolbar1">
                                        <div class="form-inline" role="form">
                                            <div class="form-group">
                                                <span>De: </span>
                                                <input name="FDesde" id="FDesde" class="form-control w70 rangos" type="text" autocomplete="off">
                                            </div>
                                            <div class="form-group">
                                                <span>a: </span>
                                                <input name="FHasta" id="FHasta" class="form-control w70 rangos" type="text" autocomplete="off">
                                            </div>
                                            <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarF();">Buscar</button>
                                            <button id="rF" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                        </div>
                                    </div>
                                    <table id="tableF"
                                           data-toolbar="#toolbar1"
                                           data-toggle="table"
                                           data-height="800"
                                           data-pagination="true"
                                           data-search="true"
                                           data-sort-class="table-active"
                                           data-sortable="true"
                                           data-show-columns="true"
                                           data-show-columns-search="true"
                                           data-filter-control="true"
                                           data-export-data-type="all"
                                           data-query-params="exportF"
                                           data-url="/Compras/getTaller">
                                        <thead class="table100-head table100 ver3 danger">
                                            <tr>
                                                <th data-field="Detalle" data-sortable="true"> Peritaje </th>
                                                <th data-field="FechaPeritaje" data-sortable="true">Fecha de Peritaje</th>
                                                <th data-field="FechaIngreso" data-sortable="true">Fecha de Ingreso</th>
                                                <th data-field="Cliente" data-sortable="true">Cliente</th>
                                                <th data-field="Telefono" data-sortable="true">Telefono</th>
                                                <th data-field="Placa" data-sortable="true">Placa</th>
                                                <th data-field="Marca">Marca</th>
                                                <th data-field="Modelo">Modelo</th>
                                                <th data-field="Kilometraje">Kilometraje</th>
                                                <th data-field="Respuesta" data-sortable="true" data-filter-control="select">Respuesta</th>
                                                <th data-field="Estado" data-sortable="true" data-filter-control="select">Estado</th>
                                                <th data-field="OrigenIngreso" data-sortable="true" data-filter-control="select">Origen de Ingreso</th>
                                                <th data-field="Anfitriona" data-sortable="true" data-filter-control="select">Anfitriona</th>
                                                <th data-field="Comprador" data-sortable="true" data-filter-control="select">Comprador</th>
                                            </tr>
                                        </thead>
                                        <tbody style="background-color:white;"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</form><script>
    $(document).ready(function () {

        document.location.hash = "#frias";

      $('#dtBasicExample').DataTable( {
          "scrollY":        "300px",
          "scrollCollapse": true,
          "paging":         false
      });

      $.datetimepicker.setLocale('es');

      $('.rangos').datetimepicker({
          format: 'd/m/Y',
          timepicker: false
      });

      $("#rF").click(function (event) {
          $('#tableF').bootstrapTable('refresh');
      })

  } );
</script>
<script>
    function download(IdCompra) {
        var baseUrl = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
        window.location = baseUrl + "/Peritaje/_PeritajePDF/" + IdCompra;
    }

    function exportF(params) {
        var options = $('#tableF').bootstrapTable('getOptions')
        if (!options.pagination) {
            params.limit = options.totalRows
        }
        return params
    }

    function FiltrarF() {
        var ini = $('#FDesde').val();
        var fin = $('#FHasta').val();

        var results = rango(ini, fin);
        //console.log("Desistidas:");
        //console.log(results);
        var array = new Array(results);
        $('#tableF').bootstrapTable('filterBy', {
            FechaIngreso: results
        })
    }

    function rango(ini, fin) {
        var splitIni = ini.split('/');
        var fInicio = splitIni[1] + '/' + splitIni[0] + '/' + splitIni[2];

        var splitFin = fin.split('/');
        var fFin = splitFin[1] + '/' + splitFin[0] + '/' + splitFin[2];

        var fechaInicio = new Date(fInicio);
        var fechaFin = new Date(fFin);
        var fechas = [];

        while (fechaFin.getTime() >= fechaInicio.getTime()) {
            var dia = fechaInicio.getDate();
            var mes = (fechaInicio.getMonth() + 1);

            var d;
            var m;
            if (dia < 10)
            { d = "0" + dia; }
            else { d = dia; }

            if (mes < 10)
            { m = "0" + mes; }
            else { m = mes; }
            fechas.push(d + '/' + m + '/' + fechaInicio.getFullYear());
            fechaInicio.setDate(fechaInicio.getDate() + 1);
        }

        console.log(fechas)
        //var arreglo = fechas.join(',')
        //arreglo = "[" + arreglo + "]"
        //console.log(arreglo);
        return fechas;
    }
</script>

        <hr />
        <footer>
            <p>&copy; 2023 - Capital Network</p>
        </footer>
    </div>

    
    
    <script src="/bundles/jqueryval?v=hEGG8cMxk9p0ncdRUOJ-CnKN7NezhnPnWIvn6REucZo1"></script>


</body>
</html>
