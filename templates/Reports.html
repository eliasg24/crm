{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes - Prospectos Madiautos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link href="{% static 'css/style.css' %}" rel="stylesheet"/>

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>


    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="/bundles/bootstrap?v=QtxRrbVxHAK-b5ZowWqv6Wt7oUOJAggG80vl1X-EGBM1"></script>

    <script src="/bundles/timepicker?v=SNA17wI1rMl4CP8ayG1ydmEu0eLQfZiFCqPl0hXZpd01"></script>

    <script src="/bundles/sweet?v=ZMOC4FpxSbszBSzdHGvkc9O_scCReJoQ_PgxKeHWirk1"></script>

    <script src="https://use.fontawesome.com/877bbc2081.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">

    <script src="https://unpkg.com/tableexport.jquery.plugin/tableExport.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/export/bootstrap-table-export.min.js"></script>

    <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.2/dist/extensions/defer-url/bootstrap-table-defer-url.min.js"></script>

    

</head>
<body style="overflow-x: hidden;">
    {% include 'nav.html' %}
    
    <div class="body-content">
        


<form action="/Leads/WriteDataToExcel" method="post"><input name="__RequestVerificationToken" type="hidden" value="-TXw1Sm9EDQ9Fj4mDz8T0eL2-9_WTwsBvIBAQJxt0e9vFQAh6miYMkjMMBPVURSleZDlE-1daEOhBRL6lCXfK58RbnCwIZVK84Tt-uqd00w1" />    <!--container principal-->
    <div class="main-panel">
        <div class="main-content">
            <div class="content-wrapper">
                <div class="container-fluid">
                    <form>
                        <h4 style="margin:20px;">Venta - Reportes</h4>
                        <div style="box-shadow:none;">
                            <div class="card-header border-0" style="background-color: #eee;">
                                <!--<p class="card-category">Recientes</p>-->
                                <div class="row">
                                    <div class="col" style="padding: 1px;">
                                        <div class="card-counter blue">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        {{cantidad_agendados}}
                                                        
                                                    </span>
                                                    <a href="#Capturados" style="color: #ffffff;"><span class="count-name">Capturados</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col" style="padding: 1px;">
                                        <div class="card-counter success">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        {{cantidad_separados_y_facturados}}
                                                    </span>
                                                    <a href="#SF" style="color: #ffffff;"><span class="count-name">Separados y Facturados</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col" style="padding: 1px;">
                                        <div class="card-counter morado">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        {{cantidad_desistidos}}
                                                    </span>
                                                    <a href="#Desistidas" style="color: #ffffff;"><span class="count-name">Desistido</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col" style="padding: 1px;">
                                        <div class="card-counter bg-warning">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        0
                                                    </span>
                                                    <a href="#Concretadas" style="color: #ffffff;"><span class="count-name">Ventas Concretadas</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col" style="padding: 1px;">
                                        <div class="card-counter aqua">
                                            <div class="form-row">
                                                <div class="form-group col-md-12">
                                                    <i class="material-icons">announcement</i>
                                                    <span class="count-numbers">
                                                        
                                                        {{cantidad_historial}}
                                                    </span>
                                                    <a href="#HistorialAsesores" style="color: #ffffff;"><span class="count-name">Historial Asesores</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body border-0" style="background-color: #eee;">
                                <div class="widget-list" id="Capturados">
                                    <div id="toolbar">
                                        <div class="form-row">
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Capturados_OrigenIngreso" name="Capturados_OrigenIngreso"><option selected="selected" value="0">-- Origen Lead --</option>
                                                    {% for origen_lead in origenes_lead_agendados %}
                                                    <option value="{{origen_lead.origen_lead}}">{{origen_lead.origen_lead}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Capturados_Respuesta" name="Capturados_Respuesta"><option selected="selected" value="0">-- Respuesta --</option>
                                                    {% for respuesta in respuestas_agendados %}
                                                    <option value="{{respuesta.respuesta}}">{{respuesta.respuesta}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Capturados_Estado" name="Capturados_Estado"><option selected="selected" value="0">-- Estado --</option>
                                                    {% for estado in estados_agendados %}
                                                    <option value="{{estado.estado}}">{{estado.estado}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Capturados_Anfitrion" name="Capturados_Anfitrion"><option selected="selected" value="0">-- Anfitrion --</option>
                                                    {% for nombre_anfitrion in anfitriones_agendados %}
                                                    <option value="{{nombre_anfitrion.nombre_anfitrion}}">{{nombre_anfitrion.nombre_anfitrion}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Capturados_Asesor" name="Capturados_Asesor"><option selected="selected" value="0">-- Asesor --</option>
                                                    {% for nombre_asesor in asesores_agendados %}
                                                    <option value="{{nombre_asesor.nombre_asesor}}">{{nombre_asesor.nombre_asesor}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-1">
                                                <select id="Capturados_Sala" name="Capturados_Sala" class="form-control form-control-sm">
                                                    <option value="0" selected>--Sala--</option>
                                                    {% for sala in salas_agendados %}
                                                    <option value="{{sala.sala}}">{{sala.sala}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-1">
                                                <select id="Capturados_Verificado" name="Capturados_Verificado" class="form-control form-control-sm">
                                                    <option value="0" selected>--Verificado--</option>
                                                    <option value="SI">SI</option>
                                                    <option value="NO">NO</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-1">
                                                <select class="form-control form-control-sm" id="Capturados_Marca" name="Capturados_Marca"><option selected="selected" value="0">-- Marca --</option>
                                                    {% for marca in mostrado_marcas_agendados %}
                                                    <option value="{{marca.marca}}">{{marca.marca}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-1">
                                                <select class="form-control form-control-sm" id="Capturados_Modelo" name="Capturados_Modelo"><option selected="selected" value="0">-- Modelo --</option>
                                                    {% for modelo in mostrado_marcas_agendados %}
                                                    <option value="{{modelo.modelo}}">{{modelo.modelo}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">De:</span>
                                                    </div>
                                                    <input name="CapturaDesde" id="CapturaDesde" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">a:</span>
                                                    </div>
                                                    <input name="CapturaHasta" id="CapturaHasta" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarCapturados();">Buscar</button>
                                                <button id="rCaptura" type="button" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                               {% if user.username == "admin" %}
                                               <button type="submit" value="Capturados" name="tabla" id="exportCapturados" class="btn btn-secondary"><i class="material-icons">description</i></button>
                                               {% endif %}
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search" id="Capturados_Cadena" name="Capturados_Cadena">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button" onclick="FiltrarCapturados();"><i class="tiny material-icons">search</i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                        <table id="tableCapturados"
                                               data-toolbar="#toolbar"
                                               data-toggle="table"
                                               data-height="1200"
                                               data-pagination="true"
                                               data-side-pagination="server"
                                               data-sort-class="table-active"
                                               data-sortable="true"
                                               data-show-columns="true"
                                               data-show-columns-search="true">
                                            <thead class="table100-head table100 ver3 blue">
                                                <tr>
                                                        <th data-field="Borrar" data-sortable="false">
                                                            Borrar
                                                        </th>
                                                    <th data-field="Detalle">Detalle</th>
                                                    <th data-field="FechaIngreso" data-sortable="true">
                                                        Fecha
                                                    </th>
                                                    <th data-field="Cliente" data-sortable="true">
                                                        Cliente
                                                    </th>
                                                    <th data-field="Telefono" data-sortable="true">Telefono</th>
                                                    <th data-field="Correo" data-visible="false">Correo</th>
                                                    <th data-field="Anfitrion" data-sortable="true">
                                                        Anfitrión
                                                    </th>
                                                    <th data-field="TipoDocumento" data-visible="false">Tipo Documento</th>
                                                    <th data-field="Documento" data-visible="false">Documento</th>
                                                    <th data-field="Campania">Campaña</th>
                                                    <th data-field="Marcas" data-visible="false">Marcas</th>
                                                    <th data-field="Modelos" data-visible="false">Modelos</th>
                                                    <th data-field="Respuesta" data-sortable="true">
                                                        Respuesta
                                                    </th>
                                                    <th data-field="Estado" data-sortable="true">
                                                        Estado
                                                    </th>
                                                    <th data-field="OrigenIngreso" data-sortable="true">
                                                        Origen de Ingreso
                                                    </th>
                                                    <th data-field="Sala" data-sortable="true">Sala</th>
                                                    <th data-field="Asesor" data-sortable="true"> Asesor </th>
                                                    <th data-field="Verificado"> Verificado </th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;">
                                                {% for lead in leads_agendados %}
                                                    <tr>
                                                        <td><button id="DeleteProspecto" type="button" class="btn btn-danger" onclick="BorrarLead(54928)"><i class="large material-icons r"> cancel</i></button></td>
                                                        <td><a href="{% url 'dashboards:detallenuevo' lead.pk %}">Detalle</td>
                                                        <td>{{lead.fecha_apertura.date|date:'Y-m-d'}}</td>
                                                        <td>{{lead.prospecto.nombre}} {{lead.prospecto.apellido_paterno}} {{lead.prospecto.apellido_materno}}</td>
                                                        <td>{{lead.prospecto.celular}}</td>
                                                        <td>{{lead.prospecto.correo}}</td>
                                                        <td>{{lead.nombre_anfitrion}}</td>
                                                        <td>{{lead.tipo_documento}}</td>
                                                        <td>{{lead.documento}}</td>
                                                        <td>{{lead.campania}}</td>
                                                        <td>{% for mostrado in mostrado_marcas %}{% if mostrado.lead == lead.pk %}{{mostrado.marca}}{% endif %}{% endfor %}</td>
                                                        <td>{% for mostrado in mostrado_marcas %}{% if mostrado.lead == lead.pk %}{{mostrado.modelo}}{% endif %}{% endfor %}</td>
                                                        <td>{{lead.respuesta}}</td>
                                                        <td>{{lead.estado}}</td>
                                                        <td>{{lead.origen_lead}}</td>
                                                        <td>{{lead.sala}}</td>
                                                        <td>{{lead.nombre_asesor}}</td>
                                                        <td>{% if lead.estado_llamada_verificacion %}SI{% else %}NO{% endif %}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                </div>

                                <div class="widget-list" id="SF">
                                    <div id="toolbar2">
                                        <div class="form-row">
                                            <div class="form-group col-md-1">
                                                <select id="SF_Sala" name="SF_Sala" class="form-control form-control-sm">
                                                    <option value="0" selected>--Sala--</option>
                                                    {% for sala in salas_separados_y_facturados %}
                                                    <option value="{{sala.sala}}">{{sala.sala}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="SF_Asesor" name="SF_Asesor"><option selected="selected" value="0">-- Asesor --</option>
                                                    {% for nombre_asesor in asesores_separados_y_facturados %}
                                                    <option value="{{nombre_asesor.nombre_asesor}}">{{nombre_asesor.nombre_asesor}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="SF_Estado" name="SF_Estado"><option selected="selected" value="0">-- Estado --</option>
                                                    {% for estado in estados_separados_y_facturados %}
                                                    <option value="{{estado.estado}}">{{estado.estado}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select id="SF_SF" class="form-control form-control-sm">
                                                    <option value="0" selected>--Separado/Facturado--</option>
                                                    <option value="Separado y Facturado">Separado y Facturado</option>
                                                    <option value="Separado">Separado</option>
                                                    <option value="Facturado">Facturado</option>
                                                    <option value="N/A">N/A</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="SF_Marca" name="SF_Marca"><option selected="selected" value="0">-- Marca --</option>
                                                    {% for marca in mostrado_marcas_separados_y_facturados %}
                                                    <option value="{{marca.marca}}">{{marca.marca}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="SF_Modelo" name="SF_Modelo"><option selected="selected" value="0">-- Modelo --</option>
                                                    {% for modelo in mostrado_marcas_separados_y_facturados %}
                                                    <option value="{{modelo.modelo}}">{{modelo.modelo}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">De:</span>
                                                    </div>
                                                    <input name="SFDesde" id="SFDesde" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">a:</span>
                                                    </div>
                                                    <input name="SFHasta" id="SFHasta" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarSF();">Buscar</button>
                                                <button id="rSF" type="button" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                               {% if user.username == "admin" %}
                                               <button type="submit" value="SF" name="tabla" id="exportInventario" class="btn btn-secondary"><i class="material-icons">description</i></button>
                                               {% endif %}
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search" id="SF_Cadena" name="SF_Cadena">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button" onclick="FiltrarSF();"><i class="tiny material-icons">search</i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                        <table id="tableSF"
                                               data-toolbar="#toolbar2"
                                               data-toggle="table"
                                               data-height="800"
                                               data-pagination="true"
                                               data-side-pagination="server"
                                               data-sort-class="table-active"
                                               data-sortable="true"
                                               data-show-columns="true"
                                               data-show-columns-search="true">
                                            <thead class="table100-head table100 ver3 success">
                                                <tr>
                                                    <th data-field="Detalle" data-sortable="false">
                                                        Detalle
                                                    </th>
                                                    <th data-field="FechaIngreso" data-sortable="true">
                                                        Fecha
                                                    </th>
                                                    <th data-field="Cliente" data-sortable="true">
                                                        Cliente
                                                    </th>
                                                    <th data-field="Telefono" data-sortable="true">Telefono</th>
                                                    <th data-field="Sala" data-sortable="true">
                                                        Sala
                                                    </th>
                                                    <th data-field="Asesor" data-sortable="true">
                                                        Asesor
                                                    </th>
                                                    <th data-field="Estado" data-sortable="true">
                                                        Estado
                                                    </th>
                                                    <th data-field="Id" data-sortable="true">
                                                        Id Vehiculo
                                                    </th>
                                                    <th data-field="Marca" data-sortable="true">
                                                        Marca
                                                    </th>
                                                    <th data-field="Modelo" data-sortable="true">
                                                        Modelo
                                                    </th>
                                                    <th data-field="Separado" data-sortable="true">
                                                        Separado/Facturado
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;">
                                                {% for lead in leads_separados_y_facturados %}
                                                    <tr>
                                                        <td><a href="{% url 'dashboards:detallenuevo' lead.pk %}">Detalle</td>
                                                        <td>{{lead.fecha_apertura.date|date:'Y-m-d'}}</td>
                                                        <td>{{lead.prospecto.nombre}} {{lead.prospecto.apellido_paterno}} {{lead.prospecto.apellido_materno}}</td>
                                                        <td>{{lead.prospecto.celular}}</td>
                                                        <td>{{lead.sala}}</td>
                                                        <td>{{lead.nombre_asesor}}</td>
                                                        <td>{{lead.estado}}</td>
                                                        <td>{% for vehiculo in separados_y_facturados_marcas %}{% if vehiculo.lead == lead.pk %}{{vehiculo.codigo_vehiculo}}{% endif %}{% endfor %}</td>
                                                        <td>{% for vehiculo in separados_y_facturados_marcas %}{% if vehiculo.lead == lead.pk %}{{vehiculo.marca}}{% endif %}{% endfor %}</td>
                                                        <td>{% for vehiculo in separados_y_facturados_marcas %}{% if vehiculo.lead == lead.pk %}{{vehiculo.modelo}}{% endif %}{% endfor %}</td>
                                                        <td>{% if lead in leads_separados %}Separado{% elif lead in leads_facturados %}Facturado{% endif %}</td>
                                                        
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                </div>

                                <div class="widget-list" id="Desistidas">
                                    <div id="toolbar3">
                                        <div class="form-row">
                                            <div class="form-group col-md-2">
                                                <select id="Desistida_Sala" name="Desistida_Sala" class="form-control form-control-sm">
                                                    <option value="0" selected>--Sala--</option>
                                                    {% for sala in salas_desistidos %}
                                                    <option value="{{sala.sala}}">{{sala.sala}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Desistida_Asesor" name="Desistida_Asesor"><option selected="selected" value="0">-- Asesor --</option>
                                                    {% for nombre_asesor in asesores_desistidos %}
                                                    <option value="{{nombre_asesor.nombre_asesor}}">{{nombre_asesor.nombre_asesor}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Desistida_Estado" name="Desistida_Estado"><option selected="selected" value="0">-- Estado --</option>
                                                    {% for estado in estados_desistidos %}
                                                    <option value="{{estado.estado}}">{{estado.estado}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Desistida_Respuesta" name="Desistida_Respuesta"><option selected="selected" value="0">-- Respuesta --</option>
                                                    {% for respuesta in respuestas_desistidos %}
                                                    <option value="{{respuesta.respuesta}}">{{respuesta.respuesta}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Desistida_Marca" name="Desistida_Marca"><option selected="selected" value="0">-- Marca --</option>
                                                    {% for marca in mostrado_marcas_desistidos %}
                                                    <option value="{{marca.marca}}">{{marca.marca}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-2">
                                                <select class="form-control form-control-sm" id="Desistida_Modelo" name="Desistida_Modelo"><option selected="selected" value="0">-- Modelo --</option>
                                                    {% for modelo in mostrado_marcas_desistidos %}
                                                    <option value="{{modelo.modelo}}">{{modelo.modelo}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">De:</span>
                                                    </div>
                                                    <input name="DesistidaDesde" id="DesistidaDesde" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">a:</span>
                                                    </div>
                                                    <input name="DesistidaHasta" id="DesistidaHasta" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarDesistidas();">Buscar</button>
                                                <button id="rDesistidas" type="button" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                               {% if user.username == "admin" %}
                                               <button type="submit" value="Desistidas" name="tabla" id="exportDesistidas" class="btn btn-secondary"><i class="material-icons">description</i></button>
                                               {% endif %}
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search" id="Desistida_Cadena" name="Desistida_Cadena">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button" onclick="FiltrarDesistidas();"><i class="tiny material-icons">search</i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                        <table id="tableDesistidas"
                                               data-toolbar="#toolbar3"
                                               data-toggle="table"
                                               data-height="800"
                                               data-pagination="true"
                                               data-side-pagination="server"
                                               data-sort-class="table-active"
                                               data-sortable="true"
                                               data-show-columns="true"
                                               data-show-columns-search="true">
                                            <thead class="table100-head table100 ver3 morado">
                                                <tr>
                                                    <th data-field="Detalle" data-sortable="false">Detalle</th>
                                                    <th data-field="FechaIngreso" data-sortable="true">Fecha</th>
                                                    <th data-field="Cliente" data-sortable="true">Cliente</th>
                                                    <th data-field="Telefono">Telefono</th>
                                                    <th data-field="Sala" data-sortable="true"> Sala </th>
                                                    <th data-field="Asesor" data-sortable="true"> Asesor </th>
                                                    <th data-field="Estado" data-sortable="true"> Estado </th>
                                                    <th data-field="Respuesta" data-sortable="true">Respuesta</th>
                                                    <th data-field="Marcas" data-sortable="true">Marcas</th>
                                                    <th data-field="Modelos" data-sortable="true">Modelos</th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;">
                                                {% for lead in leads_desistidos %}
                                                    <tr>
                                                        <td><a href="{% url 'dashboards:detallenuevo' lead.pk %}">Detalle</td>
                                                        <td>{{lead.fecha_apertura.date|date:'Y-m-d'}}</td>
                                                        <td>{{lead.prospecto.nombre}} {{lead.prospecto.apellido_paterno}} {{lead.prospecto.apellido_materno}}</td>
                                                        <td>{{lead.prospecto.celular}}</td>
                                                        <td>{{lead.sala}}</td>
                                                        <td>{{lead.nombre_asesor}}</td>
                                                        <td>{{lead.estado}}</td>
                                                        <td>{{lead.respuesta}}</td>
                                                        <td>{% for mostrado in mostrado_marcas %}{% if mostrado.lead == lead.pk %}{{mostrado.marca}}{% endif %}{% endfor %}</td>
                                                        <td>{% for mostrado in mostrado_marcas %}{% if mostrado.lead == lead.pk %}{{mostrado.modelo}}{% endif %}{% endfor %}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                </div>

                                <div class="widget-list" id="Concretadas">
                                    <div id="toolbar4">
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <select id="Concretada_Sala" name="Concretada_Sala" class="form-control form-control-sm">
                                                    <option value="0" selected>--Sala--</option>
                                                    <option value="127">127</option>
                                                    <option value="Morato">Morato</option>
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="Concretada_Asesor" name="Concretada_Asesor"><option selected="selected" value="0">-- Asesor --</option>
<option value="Laura Martinez">Laura Martinez</option>
<option value="Escobar Salamanca Milton">Escobar Salamanca Milton</option>
<option value="Gomez Ariza Fabio">Gomez Ariza Fabio</option>
<option value="Fernandez Yobanna">Fernandez Yobanna</option>
<option value="Diana Oliveros Ramos">Diana Oliveros Ramos</option>
<option value="Duque Sebastian">Duque Sebastian</option>
<option value="Sergio Piragua">Sergio Piragua</option>
<option value="Roger Steven Rincon Cohecha">Roger Steven Rincon Cohecha</option>
<option value="Alejandro Urdaneta">Alejandro Urdaneta</option>
<option value="Diana Patricia mayorga Arevalo">Diana Patricia mayorga Arevalo</option>
<option value="Brandon Ovalle">Brandon Ovalle</option>
<option value="Sergio Andres Lombo Bastidas">Sergio Andres Lombo Bastidas</option>
<option value="Angelica Marcela Zambrano Bejarano">Angelica Marcela Zambrano Bejarano</option>
<option value="Diana Pinzon">Diana Pinzon</option>
<option value="Rodriguez Martin Bernardo Antonio">Rodriguez Martin Bernardo Antonio</option>
<option value="Luis Saenz">Luis Saenz</option>
<option value="Rodriguez Carol">Rodriguez Carol</option>
<option value="Italia Franchesca Carrasco">Italia Franchesca Carrasco</option>
<option value="Catalina Ayala Cabrera">Catalina Ayala Cabrera</option>
<option value="Jose Antonio Gallo">Jose Antonio Gallo</option>
<option value="Andres Moreno">Andres Moreno</option>
<option value="Isauro Martinez Vargas">Isauro Martinez Vargas</option>
<option value="Vargas Marisol">Vargas Marisol</option>
<option value="Alexandra Rodriguez">Alexandra Rodriguez</option>
<option value="Gonzalez Fuentes Cediel">Gonzalez Fuentes Cediel</option>
<option value="Jenifer Rojas Segura">Jenifer Rojas Segura</option>
<option value="Alvaro Vanegas">Alvaro Vanegas</option>
<option value="Miguel Bonilla">Miguel Bonilla</option>
<option value="Lopez Ortiz Diego Edison">Lopez Ortiz Diego Edison</option>
<option value=" Alvaro Vanegas"> Alvaro Vanegas</option>
<option value=""></option>
<option value="Kevin Bernal">Kevin Bernal</option>
<option value="Diego Urbano">Diego Urbano</option>
<option value="Fredy Parra Neuta">Fredy Parra Neuta</option>
<option value="Andres Arias">Andres Arias</option>
<option value="Alexander Garzon">Alexander Garzon</option>
<option value="Diego Sanchez">Diego Sanchez</option>
<option value="Diego Forero">Diego Forero</option>
<option value="Paola Petro">Paola Petro</option>
<option value="Juan David Gutierrez Serrato">Juan David Gutierrez Serrato</option>
<option value="ANDRES CRUZ">ANDRES CRUZ</option>
<option value="Jorge Ramirez">Jorge Ramirez</option>
<option value="Alexander Hernandez">Alexander Hernandez</option>
<option value="Paez Carlos">Paez Carlos</option>
<option value="Nicolas Rodriguez">Nicolas Rodriguez</option>
<option value="FABIAN OSPINA">FABIAN OSPINA</option>
<option value="Freddy Cardenas">Freddy Cardenas</option>
<option value="Juan Polania">Juan Polania</option>
<option value="Consuelo Izquierdo">Consuelo Izquierdo</option>
<option value="Melina Alba Villarreal">Melina Alba Villarreal</option>
<option value="Sandra Lizbeth Cano Garcia">Sandra Lizbeth Cano Garcia</option>
<option value="Karen Buitrago Rodríguez">Karen Buitrago Rodr&#237;guez</option>
<option value="Parra Gil Maria Dolores">Parra Gil Maria Dolores</option>
<option value="Ana Milena Carranza">Ana Milena Carranza</option>
<option value="Jaime Murcia">Jaime Murcia</option>
<option value="Javier Caicedo">Javier Caicedo</option>
<option value="David Correa">David Correa</option>
<option value="Jimenez Enrique">Jimenez Enrique</option>
<option value="Sebastian Orrego">Sebastian Orrego</option>
<option value="Gustavo Parraga">Gustavo Parraga</option>
<option value="Cesar Cruz">Cesar Cruz</option>
<option value="Miranda Quintero Angie  Paola">Miranda Quintero Angie  Paola</option>
<option value="Ximena Bayona">Ximena Bayona</option>
<option value="Bustos Cristian">Bustos Cristian</option>
<option value="Lozada Juan">Lozada Juan</option>
<option value="Sandra Isabel Pulido">Sandra Isabel Pulido</option>
<option value="Carlos Felipe Cedeño Vargas">Carlos Felipe Cede&#241;o Vargas</option>
<option value="Garcia Acero Diego Alejandro">Garcia Acero Diego Alejandro</option>
<option value="0">0</option>
</select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="Concretada_Estado" name="Concretada_Estado"><option selected="selected" value="0">-- Estado --</option>
<option value="Sin contactar">Sin contactar</option>
<option value="No contactado / interesado ">No contactado / interesado </option>
<option value="Seguimiento de venta usado">Seguimiento de venta usado</option>
<option value="Separación">Separaci&#243;n</option>
<option value="No contesta/seguimiento">No contesta/seguimiento</option>
<option value="N/A">N/A</option>
<option value="Capacidad de endeudamiento">Capacidad de endeudamiento</option>
<option value="Venta Finalizada ">Venta Finalizada </option>
<option value="Poder adquisitivo">Poder adquisitivo</option>
<option value="Venta y Entrega">Venta y Entrega</option>
<option value="Cliente no acepta oferta de retoma">Cliente no acepta oferta de retoma</option>
<option value="Interesado mas adelante">Interesado mas adelante</option>
<option value="Sin stock">Sin stock</option>
<option value="Seguimiento pago">Seguimiento pago</option>
<option value="Seguimiento de venta">Seguimiento de venta</option>
<option value="Ya compró">Ya compr&#243;</option>
<option value="Venta desistida">Venta desistida</option>
<option value="Datos de contacto incorrectos">Datos de contacto incorrectos</option>
<option value="Imposible contactar">Imposible contactar</option>
<option value="Alistamiento">Alistamiento</option>
<option value="Sigue proceso">Sigue proceso</option>
<option value="No interesado">No interesado</option>
<option value="Desistido">Desistido</option>
<option value="Información de vehículos nuevos">Informaci&#243;n de veh&#237;culos nuevos</option>
<option value="Vehículo ya se vendió">Veh&#237;culo ya se vendi&#243;</option>
<option value="Nunca Contactado">Nunca Contactado</option>
<option value="Contactado / Interesado">Contactado / Interesado</option>
<option value="Seguimiento venta">Seguimiento venta</option>
</select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="Concretada_Respuesta" name="Concretada_Respuesta"><option selected="selected" value="0">-- Respuesta --</option>
<option value="Sin Contactar">Sin Contactar</option>
<option value="Entrega del vehiculo">Entrega del vehiculo</option>
<option value="Test drive">Test drive</option>
<option value="Niega solicitud">Niega solicitud</option>
<option value="Separación">Separaci&#243;n</option>
<option value="En otra ciudad inviable">En otra ciudad inviable</option>
<option value="No contesta/Fuera de Servicio">No contesta/Fuera de Servicio</option>
<option value="Espera de aprobacion de Credito">Espera de aprobacion de Credito</option>
<option value="Entregado">Entregado</option>
<option value="N/A">N/A</option>
<option value="Capacidad de endeudamiento">Capacidad de endeudamiento</option>
<option value="Se deja mensaje de voz">Se deja mensaje de voz</option>
<option value="Interes mediano plazo / Fecha">Interes mediano plazo / Fecha</option>
<option value="En otra ciudad posibilidad traslado">En otra ciudad posibilidad traslado</option>
<option value="Cliente no acepta oferta de retoma">Cliente no acepta oferta de retoma</option>
<option value="Cita agendada">Cita agendada</option>
<option value="Interesado mas adelante">Interesado mas adelante</option>
<option value="Asignar Asesor">Asignar Asesor</option>
<option value="No contesta / volver a llamar">No contesta / volver a llamar</option>
<option value="Alistamiento mecanico basico ">Alistamiento mecanico basico </option>
<option value="Llamada realizada">Llamada realizada</option>
<option value="Negociacion">Negociacion</option>
<option value="Cliente contactado por otro asesor">Cliente contactado por otro asesor</option>
<option value="Cliente duplicado">Cliente duplicado</option>
<option value="Ya compro">Ya compro</option>
<option value="Datos de contacto incorrectos">Datos de contacto incorrectos</option>
<option value="No esta el vh de su interes">No esta el vh de su interes</option>
<option value="Poca Capacidad de endeudamiento">Poca Capacidad de endeudamiento</option>
<option value="Agenda cita">Agenda cita</option>
<option value="Esta interesado en otro vehiculo">Esta interesado en otro vehiculo</option>
<option value="Enviar cotización/catalogo">Enviar cotizaci&#243;n/catalogo</option>
<option value="Reportado">Reportado</option>
<option value="No interesado">No interesado</option>
<option value="Desistido">Desistido</option>
<option value="Vh excede su presupuesto">Vh excede su presupuesto</option>
<option value="Mensaje enviado a whatsapp">Mensaje enviado a whatsapp</option>
<option value="Interes largo plazo / Fecha">Interes largo plazo / Fecha</option>
<option value="Informacion de vehiculos nuevos">Informacion de vehiculos nuevos</option>
<option value="Interes en vehiculo de bajo presupuesto">Interes en vehiculo de bajo presupuesto</option>
<option value="Vehiculo separado">Vehiculo separado</option>
<option value="En el momento no hay vh de interes">En el momento no hay vh de interes</option>
<option value="Marca/ Modelo no se encuntra disponible">Marca/ Modelo no se encuntra disponible</option>
<option value="Hacer una nueva llamada_ Cita // fecha">Hacer una nueva llamada_ Cita // fecha</option>
<option value="Vehículo ya se vendió">Veh&#237;culo ya se vendi&#243;</option>
<option value="Nunca Contactado">Nunca Contactado</option>
<option value="Aceptacion de documentos">Aceptacion de documentos</option>
<option value="Crédito Negado">Cr&#233;dito Negado</option>
<option value="Enviar catalogo / Informacion">Enviar catalogo / Informacion</option>
<option value="Seguimiento venta">Seguimiento venta</option>
<option value="Vehículo entregado">Veh&#237;culo entregado</option>
</select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">De:</span>
                                                    </div>
                                                    <input name="ConcretadaDesde" id="ConcretadaDesde" class="form-control" type="text" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">a:</span>
                                                    </div>
                                                    <input name="ConcretadaHasta" id="ConcretadaHasta" class="form-control" type="text" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarConcretadas();">Buscar</button>
                                                <button id="rConcretadas" type="button" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                               {% if user.username == "admin" %}
                                               <button type="submit" value="Concretadas" name="tabla" id="exportConcretadas" class="btn btn-secondary"><i class="material-icons">description</i></button>
                                               {% endif %}
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search" id="Concretada_Cadena" name="Concretada_Cadena">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button" onclick="FiltrarConcretadas();"><i class="tiny material-icons">search</i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                        <table id="tableConcretadas"
                                               data-toolbar="#toolbar4"
                                               data-toggle="table"
                                               data-height="800"
                                               data-pagination="true"
                                               data-side-pagination="server"
                                               data-sort-class="table-active"
                                               data-sortable="true"
                                               data-show-columns="true"
                                               data-show-columns-search="true">
                                            <thead class="table100-head table100 ver3 bg-warning">
                                                <tr>
                                                    <th data-field="Detalle">Detalle</th>
                                                    <th data-field="FechaCierre" data-sortable="true">Fecha Cierre</th>
                                                    <th data-field="FechaIngreso" data-sortable="true">Fecha Apertura</th>
                                                    <th data-field="Cliente" data-sortable="true">Cliente</th>
                                                    <th data-field="Telefono">Telefono</th>
                                                    <th data-field="Sala" data-sortable="true"> Sala </th>
                                                    <th data-field="Asesor" data-sortable="true"> Asesor </th>
                                                    <th data-field="Estado" data-sortable="true">Estado</th>
                                                    <th data-field="Respuesta" data-sortable="true">Respuesta</th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;"></tbody>
                                        </table>
                                </div>

                                <div class="widget-list" id="HistorialAsesores">
                                    <div id="toolbar5">
                                        
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <select id="Historial_Sala" name="Historial_Sala" class="form-control form-control-sm">
                                                    <option value="0" selected>--Sala--</option>
                                                    {% for sala in salas_agendados %}
                                                    <option value="{{sala.sala}}">{{sala.sala}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="Historial_Asesor" name="Historial_Asesor"><option selected="selected" value="0">-- Asesor --</option>
                                                    {% for nombre_asesor in asesores_agendados %}
                                                    <option value="{{nombre_asesor.nombre_asesor}}">{{nombre_asesor.nombre_asesor}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="Historial_Estado" name="Historial_Estado"><option selected="selected" value="0">-- Estado --</option>
                                                    {% for estado in estados_agendados %}
                                                    <option value="{{estado.estado}}">{{estado.estado}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <select class="form-control form-control-sm" id="Historial_Respuesta" name="Historial_Respuesta"><option selected="selected" value="0">-- Respuesta --</option>
                                                    {% for respuesta in respuestas_agendados %}
                                                    <option value="{{respuesta.respuesta}}">{{respuesta.respuesta}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">De:</span>
                                                    </div>
                                                    <input name="HistorialDesde" id="HistorialDesde" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <span class="input-group-text" id="basic-addon1">a:</span>
                                                    </div>
                                                    <input name="HistorialHasta" id="HistorialHasta" class="form-control" type="date" autocomplete="off">
                                                </div>
                                            </div>
                                            <div class="form-group col-md3">
                                                <button id="ok" type="button" class="btn btn-primary" onclick="FiltrarHistorial();">Buscar</button>
                                                <button id="rHistorial" type="button" class="btn btn-secondary"><i class="material-icons">cached</i></button>
                                               {% if user.username == "admin" %}
                                               <button type="submit" value="Historial" name="tabla" id="exportHistorial" class="btn btn-secondary"><i class="material-icons">description</i></button>
                                               {% endif %}
                                            </div>
                                            <div class="form-group col-md-3">
                                                <div class="input-group mb-3">
                                                    <input type="text" class="form-control" placeholder="Search" id="Historial_Cadena" name="Historial_Cadena">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-outline-secondary" type="button" onclick="FiltrarHistorial();"><i class="tiny material-icons">search</i></button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                        <table id="tableHistorial"
                                               data-toolbar="#toolbar5"
                                               data-toggle="table"
                                               data-height="800"
                                               data-pagination="true"
                                               data-side-pagination="server"
                                               data-sort-class="table-active"
                                               data-sortable="true"
                                               data-show-columns="true"
                                               data-show-columns-search="true">
                                            <thead class="table100-head table100 ver3 aqua">
                                                <tr>
                                                    <th data-field="Detalle">Detalle</th>
                                                    <th data-field="FechaUltimaAccion" data-sortable="true">Fecha Ultima Accion</th>
                                                    <th data-field="FechaIngreso" data-sortable="true">Fecha Captura</th>
                                                    <th data-field="Cliente" data-sortable="true">Cliente</th>
                                                    <th data-field="Telefono" data-sortable="true">Telefono</th>
                                                    <th data-field="Sala" data-sortable="true"> Sala </th>
                                                    <th data-field="Asesor" data-sortable="true"> Asesor </th>
                                                    <th data-field="Estado" data-sortable="true">Estado</th>
                                                    <th data-field="Respuesta" data-sortable="true">Respuesta</th>
                                                </tr>
                                            </thead>
                                            <tbody style="background-color:white;">
                                                {% for lead in leads_agendados %}
                                                    <tr>
                                                        <td><a href="{% url 'dashboards:detallenuevo' lead.pk %}">Detalle</td>
                                                        <td>{% for lead_historial in historial %}{% if lead_historial.lead == lead.pk %}{{lead_historial.fecha__max.date|date:'Y-m-d'}}{% endif %}{% endfor %}</td>
                                                        <td>{{lead.fecha_apertura.date|date:'Y-m-d'}}</td>
                                                        <td>{{lead.prospecto.nombre}} {{lead.prospecto.apellido_paterno}} {{lead.prospecto.apellido_materno}}</td>
                                                        <td>{{lead.prospecto.celular}}</td>
                                                        <td>{{lead.sala}}</td>
                                                        <td>{{lead.nombre_asesor}}</td>
                                                        <td>{{lead.estado}}</td>
                                                        <td>{{lead.respuesta}}</td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</form><script>
    $(document).ready(function () {
        $('#dtBasicExample').DataTable({
            "scrollY": "300px",
            "scrollCollapse": true,
            "paging": false
        });

        $.datetimepicker.setLocale('es');

        //$(".rangos").datetimepicker({
        //    format: 'd/m/Y',
        //    timepicker: false,
        //});

        $('#CapturaDesde').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });
        $('#CapturaHasta').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });

        $('#SFDesde').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });
        $('#SFHasta').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });

        $('#DesistidaDesde').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });
        $('#DesistidaHasta').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });

        $('#ConcretadaDesde').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });
        $('#ConcretadaHasta').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });

        $('#HistorialDesde').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });
        $('#HistorialHasta').datetimepicker({
            format: 'd/m/Y',
            timepicker: false
        });

        $("#rCaptura").click(function (event) {
            //$('#tableCapturados').bootstrapTable('refresh');
            $('#CapturaDesde').val('');
            $('#CapturaHasta').val('');
            getData(1,10);
        })

        $("#rSF").click(function (event) {
            $('#SFDesde').val('');
            $('#SFHasta').val('');
            getDataSF(1, 10);
        })

        $("#rDesistidas").click(function (event) {
            $('#DesistidaDesde').val('');
            $('#DesistidaHasta').val('');
            getDataDes(1, 10);
        })

        $("#rConcretadas").click(function (event) {
            $('#ConcretadaDesde').val('');
            $('#ConcretadaHasta').val('');
            getDataCon(1, 10);
        })

        $("#rHistorial").click(function (event) {
            $('#HistorialDesde').val('');
            $('#HistorialHasta').val('');
            getDataHis(1, 10);
        })
    });
</script>
<script>
    var baseUrl = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
    var $tableCap = $('#tableCapturados')
    var $tableSF = $('#tableSF')
    var $tableDes = $('#tableDesistidas')
    var $tableCon = $('#tableConcretadas')
    var $tableHis = $('#tableHistorial')


    $("#Capturados_OrigenIngreso").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Respuesta").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Estado").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Anfitrion").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Asesor").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Verificado").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Sala").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Marca").change(function () {
        getData(1, 10);
    });

    $("#Capturados_Modelo").change(function () {
        getData(1, 10);
    });

    function getData(number, size) {
        var fechaIni1 = $("#CapturaDesde").val();
        var fechaIni = '';
        if (fechaIni1 != '' && fechaIni1 != null) {
            var fechaIniS = fechaIni1.split("/");
            fechaIni = fechaIniS[2] + '-' + fechaIniS[1] + '-' + fechaIniS[0];
        }

        var fechaFin1 = $("#CapturaHasta").val();
        var fechaFin = '';
        if (fechaFin1 != '' && fechaFin1 != null) {
            var fechaFinS = fechaFin1.split("/");
            fechaFin = fechaFinS[2] + '-' + fechaFinS[1] + '-' + fechaFinS[0];
        }

        $.get(baseUrl + '/Leads/getCapturados2/?off=' + number + '&size=' + size
            + '&Origen=' + $("#Capturados_OrigenIngreso").val()
            + '&Respuesta=' + $("#Capturados_Respuesta").val()
            + '&Estado=' + $("#Capturados_Estado").val()
            + '&Anfitrion=' + $("#Capturados_Anfitrion").val()
            + '&Asesor=' + $("#Capturados_Asesor").val()
            + '&Verificado=' + $("#Capturados_Verificado").val()
            + '&Sala=' + $("#Capturados_Sala").val()
            + '&Marca=' + $("#Capturados_Marca").val()
            + '&Modelo=' + $("#Capturados_Modelo").val()
            + '&FechaIni=' + fechaIni
            + '&FechaFin=' + fechaFin
            + '&Cadena=' + $("#Capturados_Cadena").val()
            , {
                offset: (number - 1) * size,
                limit: size
            }, function (res) {
                $tableCap.bootstrapTable('load', res)
            })
    }

    $("#SF_Sala").change(function () {
        getDataSF(1, 10);
    });

    $("#SF_Asesor").change(function () {
        getDataSF(1, 10);
    });

    $("#SF_Estado").change(function () {
        getDataSF(1, 10);
    });

    $("#SF_SF").change(function () {
        getDataSF(1, 10);
    });

    $("#SF_Marca").change(function () {
        getDataSF(1, 10);
    });

    $("#SF_Modelo").change(function () {
        getDataSF(1, 10);
    });

    function getDataSF(number, size) {
        var fechaIni1 = $("#SFDesde").val();
        var fechaIni = '';
        if (fechaIni1 != '' && fechaIni1 != null) {
            var fechaIniS = fechaIni1.split("/");
            fechaIni = fechaIniS[2] + '-' + fechaIniS[1] + '-' + fechaIniS[0];
        }

        var fechaFin1 = $("#SFHasta").val();
        var fechaFin = '';
        if (fechaFin1 != '' && fechaFin1 != null) {
            var fechaFinS = fechaFin1.split("/");
            fechaFin = fechaFinS[2] + '-' + fechaFinS[1] + '-' + fechaFinS[0];
        }

        $.get(baseUrl + '/Leads/getSF2/?off=' + number + '&size=' + size
            + '&Sala=' + $("#SF_Sala").val()
            + '&Asesor=' + $("#SF_Asesor").val()
            + '&Estado=' + $("#SF_Estado").val()
            + '&SF=' + $("#SF_SF").val()
            + '&Marca=' + $("#SF_Marca").val()
            + '&Modelo=' + $("#SF_Modelo").val()
            + '&FechaIni=' + fechaIni
            + '&FechaFin=' + fechaFin
            + '&Cadena=' + $("#SF_Cadena").val()
            , {
                offset: (number - 1) * size,
                limit: size
            }, function (res) {
                $tableSF.bootstrapTable('load', res)
            })
    }

    $("#Desistida_Sala").change(function () {
        getDataDes(1, 10);
    });

    $("#Desistida_Asesor").change(function () {
        getDataDes(1, 10);
    });

    $("#Desistida_Estado").change(function () {
        getDataDes(1, 10);
    });

    $("#Desistida_Respuesta").change(function () {
        getDataDes(1, 10);
    });

    $("#Desistida_Marca").change(function () {
        getDataDes(1, 10);
    });

    $("#Desistida_Modelo").change(function () {
        getDataDes(1, 10);
    });

    function getDataDes(number, size) {
        var fechaIni1 = $("#DesistidaDesde").val();
        var fechaIni = '';
        if (fechaIni1 != '' && fechaIni1 != null) {
            var fechaIniS = fechaIni1.split("/");
            fechaIni = fechaIniS[2] + '-' + fechaIniS[1] + '-' + fechaIniS[0];
        }

        var fechaFin1 = $("#DesistidaHasta").val();
        var fechaFin = '';
        if (fechaFin1 != '' && fechaFin1 != null) {
            var fechaFinS = fechaFin1.split("/");
            fechaFin = fechaFinS[2] + '-' + fechaFinS[1] + '-' + fechaFinS[0];
        }

        $.get(baseUrl + '/Leads/getDesistidas2/?off=' + number + '&size=' + size
            + '&Sala=' + $("#Desistida_Sala").val()
            + '&Asesor=' + $("#Desistida_Asesor").val()
            + '&Estado=' + $("#Desistida_Estado").val()
            + '&Respuesta=' + $("#Desistida_Respuesta").val()
            + '&Marca=' + $("#Desistida_Marca").val()
            + '&Modelo=' + $("#Desistida_Modelo").val()
            + '&FechaIni=' + fechaIni
            + '&FechaFin=' + fechaFin
            + '&Cadena=' + $("#Desistida_Cadena").val()
            , {
                offset: (number - 1) * size,
                limit: size
            }, function (res) {
                $tableDes.bootstrapTable('load', res)
            })
    }

    $("#Concretada_Sala").change(function () {
        getDataCon(1, 10);
    });

    $("#Concretada_Asesor").change(function () {
        getDataCon(1, 10);
    });

    $("#Concretada_Estado").change(function () {
        getDataCon(1, 10);
    });

    $("#Concretada_Respuesta").change(function () {
        getDataCon(1, 10);
    });

    function getDataCon(number, size) {
        var fechaIni1 = $("#ConcretadaDesde").val();
        var fechaIni = '';
        if (fechaIni1 != '' && fechaIni1 != null) {
            var fechaIniS = fechaIni1.split("/");
            fechaIni = fechaIniS[2] + '-' + fechaIniS[1] + '-' + fechaIniS[0];
        }

        var fechaFin1 = $("#ConcretadaHasta").val();
        var fechaFin = '';
        if (fechaFin1 != '' && fechaFin1 != null) {
            var fechaFinS = fechaFin1.split("/");
            fechaFin = fechaFinS[2] + '-' + fechaFinS[1] + '-' + fechaFinS[0];
        }

        $.get(baseUrl + '/Leads/getConcretadas2/?off=' + number + '&size=' + size
            + '&Sala=' + $("#Concretada_Sala").val()
            + '&Asesor=' + $("#Concretada_Asesor").val()
            + '&Estado=' + $("#Concretada_Estado").val()
            + '&Respuesta=' + $("#Concretada_Respuesta").val()
            + '&FechaIni=' + fechaIni
            + '&FechaFin=' + fechaFin
            + '&Cadena=' + $("#Concretada_Cadena").val()
            , {
                offset: (number - 1) * size,
                limit: size
            }, function (res) {
                $tableCon.bootstrapTable('load', res)
            })
    }

    $("#Historial_Sala").change(function () {
        getDataHis(1, 10);
    });

    $("#Historial_Asesor").change(function () {
        getDataHis(1, 10);
    });

    $("#Historial_Estado").change(function () {
        getDataHis(1, 10);
    });

    $("#Historial_Respuesta").change(function () {
        getDataHis(1, 10);
    });

    function getDataHis(number, size) {
        var fechaIni1 = $("#HistorialDesde").val();
        var fechaIni = '';
        if (fechaIni1 != '' && fechaIni1 != null) {
            var fechaIniS = fechaIni1.split("/");
            fechaIni = fechaIniS[2] + '-' + fechaIniS[1] + '-' + fechaIniS[0];
        }

        var fechaFin1 = $("#HistorialHasta").val();
        var fechaFin = '';
        if (fechaFin1 != '' && fechaFin1 != null) {
            var fechaFinS = fechaFin1.split("/");
            fechaFin = fechaFinS[2] + '-' + fechaFinS[1] + '-' + fechaFinS[0];
        }

        $.get(baseUrl + '/Leads/getHistorialAsesor2/?off=' + number + '&size=' + size
            + '&Sala=' + $("#Historial_Sala").val()
            + '&Asesor=' + $("#Historial_Asesor").val()
            + '&Estado=' + $("#Historial_Estado").val()
            + '&Respuesta=' + $("#Historial_Respuesta").val()
            + '&FechaIni=' + fechaIni
            + '&FechaFin=' + fechaFin
            + '&Cadena=' + $("#Historial_Cadena").val()
            , {
                offset: (number - 1) * size,
                limit: size
            }, function (res) {
                $tableHis.bootstrapTable('load', res)
            })
    }


    $(function () {
        $tableCap.on('page-change.bs.table', function (e, number, size) {
            getData(number, size)
        })
        var options = $tableCap.bootstrapTable('getOptions')
        getData(options.pageNumber, options.pageSize)
    })

    $(function () {
        $tableSF.on('page-change.bs.table', function (e, number, size) {
            getDataSF(number, size)
        })
        var options = $tableSF.bootstrapTable('getOptions')
        getDataSF(options.pageNumber, options.pageSize)
    })

    $(function () {
        $tableDes.on('page-change.bs.table', function (e, number, size) {
            getDataDes(number, size)
        })
        var options = $tableDes.bootstrapTable('getOptions')
        getDataDes(options.pageNumber, options.pageSize)
    })

    $(function () {
        $tableCon.on('page-change.bs.table', function (e, number, size) {
            getDataCon(number, size)
        })
        var options = $tableCon.bootstrapTable('getOptions')
        getDataCon(options.pageNumber, options.pageSize)
    })

    $(function () {
        $tableHis.on('page-change.bs.table', function (e, number, size) {
            getDataHis(number, size)
        })
        var options = $tableHis.bootstrapTable('getOptions')
        getDataHis(options.pageNumber, options.pageSize)
    })
</script>
<script>

    function BorrarLead(idLead) {
        var data = {
            "IdLead": idLead,
        };
        var baseUrl = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
        swal({
            title: "¡Atención! Esta información no podra ser recuperada.",
            text: "Esta información no podra ser recuperada.",
            type: "warning",
            showCancelButton: true,
            confirmButtonClass: "btn-danger",
            confirmButtonText: "¡Eliminar!",
            closeOnConfirm: false
        },
            function () {
                $.ajax({
                    type: "POST",
                    url: baseUrl + "/Leads/EliminarLead",
                    data: data,
                    cache: false,
                    success: function (response) {
                        swal({
                            title: "OK!",
                            text: "Toda la información del prospecto ha sido eliminada.",
                            type: "success",
                            showCancelButton: true,
                            confirmButtonClass: "btn-success",
                            confirmButtonText: "OK!",
                            closeOnConfirm: false
                        },
                            function () {
                                //swal("OK!", "Toda la información del prospecto ha sido eliminada.", "success");
                                location.reload();
                            });
                    },
                    error: function (response) {
                        swal("Oh no!", "Tuvimos un problema, por favor intente de nuevo.", "warning");
                    }
                });
            });
    }

    function exportCapturados(params) {
        var options = $('#tableCapturados').bootstrapTable('getOptions')
        if (!options.pagination) {
            params.limit = options.totalRows
        }
        return params
    }

    function exportSF(params) {
        var options = $('#tableSF').bootstrapTable('getOptions')
        if (!options.pagination) {
            params.limit = options.totalRows
        }
        return params
    }

    function exportDesistidas(params) {
        var options = $('#tableDesistidas').bootstrapTable('getOptions')
        if (!options.pagination) {
            params.limit = options.totalRows
        }
        return params
    }

    function exportConcretadas(params) {
        var options = $('#tableConcretadas').bootstrapTable('getOptions')
        if (!options.pagination) {
            params.limit = options.totalRows
        }
        return params
    }

    function exportHistorial(params) {
        var options = $('#tableHistorial').bootstrapTable('getOptions')
        if (!options.pagination) {
            params.limit = options.totalRows
        }
        return params
    }

    function FiltrarCapturados() {
        //var ini=$('#CapturaDesde').val();
        //var fin = $('#CapturaHasta').val();

        //var results = rango(ini, fin);
        ////console.log("Capturadas:");
        ////console.log(results);
        //var array = new Array(results);
        //$('#tableCapturados').bootstrapTable('filterBy', {
        //    FechaIngreso: results
        //})
        getData(1, 10);
    }

    function FiltrarSF() {
        //var ini = $('#SFDesde').val();
        //var fin = $('#SFHasta').val();

        //var results = rango(ini, fin);
        ////console.log("SF:");
        ////console.log(results);
        //var array = new Array(results);
        //$('#tableSF').bootstrapTable('filterBy', {
        //    FechaIngreso: results
        //})
        getDataSF(1, 10);
    }

    function FiltrarDesistidas() {
        //var ini = $('#DesistidaDesde').val();
        //var fin = $('#DesistidaHasta').val();

        //var results = rango(ini, fin);
        ////console.log("Desistidas:");
        ////console.log(results);
        //var array = new Array(results);
        //$('#tableDesistidas').bootstrapTable('filterBy', {
        //    FechaIngreso: results
        //})
        getDataDes(1, 10);
    }

    function FiltrarConcretadas() {
        //var ini = $('#ConcretadaDesde').val();
        //var fin = $('#ConcretadaHasta').val();

        //var results = rango(ini, fin);
        ////console.log("Concretadas:");
        ////console.log(results);
        //var array = new Array(results);

        //$('#tableConcretadas').bootstrapTable('filterBy', {
        //    FechaCierre: results
        //})
        getDataCon(1, 10);
    }

    function FiltrarHistorial() {
        //var ini = $('#HistorialDesde').val();
        //var fin = $('#HistorialHasta').val();

        //var results = rango(ini, fin);
        ////console.log("Historial:");
        ////console.log(results);
        //var array = new Array(results);
        //$('#tableHistorial').bootstrapTable('filterBy', {
        //    FechaIngreso: results
        //})
        getDataHis(1, 10);
    }

    function rango(ini, fin) {
        var splitIni = ini.split('/');
        var fInicio = splitIni[1] + '/' + splitIni[0] + '/' + splitIni[2];

        var splitFin = fin.split('/');
        var fFin = splitFin[1] + '/' + splitFin[0] + '/' + splitFin[2];

        var fechaInicio = new Date(fInicio);
        var fechaFin = new Date(fFin);
        var fechas = [];

        while (fechaFin.getTime() >= fechaInicio.getTime()) {
            var dia = fechaInicio.getDate();
            var mes = (fechaInicio.getMonth() + 1);

            var d;
            var m;
            if (dia < 10) { d = "0" + dia; }
            else { d = dia; }

            if (mes < 10) { m = "0" + mes; }
            else { m = mes; }
            fechas.push(d + '/' + m + '/' + fechaInicio.getFullYear());
            fechaInicio.setDate(fechaInicio.getDate() + 1);
        }

        console.log(fechas)
        //var arreglo = fechas.join(',')
        //arreglo = "[" + arreglo + "]"
        //console.log(arreglo);
        return fechas;
    }
</script>



        <hr />
        <footer>
            <p>&copy; 2023 - Capital Network</p>
        </footer>
    </div>

    
    
    <script src="/bundles/jqueryval?v=hEGG8cMxk9p0ncdRUOJ-CnKN7NezhnPnWIvn6REucZo1"></script>


</body>
</html>
